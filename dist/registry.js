Object.defineProperty(exports, "__esModule", { value: true });
var dom_1 = require("./dom");
var registry = new Map();
var isBrowser = typeof window !== 'undefined' && !!window.document;
function register(moduleID, css) {
    if (!registry.has(moduleID) || registry.get(moduleID) !== css) {
        registry.set(moduleID, css);
        if (isBrowser)
            dom_1.default(moduleID, css);
    } // else: content is registered or unchanged --> noop
    console.log('isServer', !isBrowser, registry.size, process.pid);
}
exports.register = register;
function get() {
    console.log('2isServer', !isBrowser, registry.size, process.pid);
    return registry;
}
exports.get = get;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVnaXN0cnkuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvcmVnaXN0cnkudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLDZCQUFpQztBQUNqQyxJQUFNLFFBQVEsR0FBaUMsSUFBSSxHQUFHLEVBQTJCLENBQUM7QUFFbEYsSUFBTSxTQUFTLEdBQVksT0FBTyxNQUFNLEtBQUssV0FBVyxJQUFJLENBQUMsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDO0FBRTlFLGtCQUF5QixRQUF5QixFQUFFLEdBQVc7SUFDM0QsRUFBRSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxJQUFJLFFBQVEsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQztRQUM1RCxRQUFRLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBRSxHQUFHLENBQUMsQ0FBQztRQUM1QixFQUFFLENBQUMsQ0FBQyxTQUFTLENBQUM7WUFBQyxhQUFZLENBQUMsUUFBUSxFQUFFLEdBQUcsQ0FBQyxDQUFDO0lBQy9DLENBQUMsQ0FBQyxvREFBb0Q7SUFDdEQsT0FBTyxDQUFDLEdBQUcsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxTQUFTLEVBQUUsUUFBUSxDQUFDLElBQUksRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDcEUsQ0FBQztBQU5ELDRCQU1DO0FBRUQ7SUFDSSxPQUFPLENBQUMsR0FBRyxDQUFDLFdBQVcsRUFBRSxDQUFDLFNBQVMsRUFBRSxRQUFRLENBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNqRSxNQUFNLENBQUMsUUFBUSxDQUFDO0FBQ3BCLENBQUM7QUFIRCxrQkFHQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB1cGRhdGVTdHlsZXMgZnJvbSAnLi9kb20nO1xuY29uc3QgcmVnaXN0cnk6IE1hcDxudW1iZXIgfCBzdHJpbmcsIHN0cmluZz4gPSBuZXcgTWFwPG51bWJlciB8IHN0cmluZywgc3RyaW5nPigpO1xuXG5jb25zdCBpc0Jyb3dzZXI6IGJvb2xlYW4gPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiAhIXdpbmRvdy5kb2N1bWVudDtcblxuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyKG1vZHVsZUlEOiBudW1iZXIgfCBzdHJpbmcsIGNzczogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKCFyZWdpc3RyeS5oYXMobW9kdWxlSUQpIHx8IHJlZ2lzdHJ5LmdldChtb2R1bGVJRCkgIT09IGNzcykge1xuICAgICAgICByZWdpc3RyeS5zZXQobW9kdWxlSUQsIGNzcyk7XG4gICAgICAgIGlmIChpc0Jyb3dzZXIpIHVwZGF0ZVN0eWxlcyhtb2R1bGVJRCwgY3NzKTtcbiAgICB9IC8vIGVsc2U6IGNvbnRlbnQgaXMgcmVnaXN0ZXJlZCBvciB1bmNoYW5nZWQgLS0+IG5vb3BcbiAgICBjb25zb2xlLmxvZygnaXNTZXJ2ZXInLCAhaXNCcm93c2VyLCByZWdpc3RyeS5zaXplLCBwcm9jZXNzLnBpZCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXQoKTogTWFwPG51bWJlciB8IHN0cmluZywgc3RyaW5nPiB7XG4gICAgY29uc29sZS5sb2coJzJpc1NlcnZlcicsICFpc0Jyb3dzZXIsIHJlZ2lzdHJ5LnNpemUsIHByb2Nlc3MucGlkKTtcbiAgICByZXR1cm4gcmVnaXN0cnk7XG59XG4iXX0=